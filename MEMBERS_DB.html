<!DOCTYPE html>
<html>
  <head></head>
  <body>
    

    <script>
      const DB_NAME = "MEMBERS_DB";
      const DB_VERSION = 1;
      let openMemberDBRequest = indexedDB.open(DB_NAME, DB_VERSION);
      openMemberDBRequest.onupgradeneeded = function (event) {
        let db = openMemberDBRequest.result;
        switch (event.oldVersion) {
          case 0:
          // version 0 means the client had no database

          case 1:
          // client had version 1
        }
      };

      openMemberDBRequest.onerror = function () {
        console.error("Error", openMemberDBRequest.error);
      };

      openMemberDBRequest.onsuccess = function () {
        let db = openMemberDBRequest.result;
      };

      // delete DB
      // let deleteRequest = indexedDB.deleteDatabase(DB_NAME);

      // We can't open a database using an older open call version
      // if the current user database has a higher version than in the open cancelIdleCallback, e.g. the existing DB version is 3, and we try to open(...2), then that's an error, openRequest.onerror triggers.
      // That's rare, but such a thing may happen when a visitor loads outdated JavaScript code, e.g. from a proxy cache. So the code is old, but his database is new.
      // To protect from errors, we should check db.version and suggest a page XMLHttpRequestUpload. use proper HTTP caching headers to avoid loading th eold ConvolverNode, so that you'll never have such problems.
    </script>
  </body>
</html>
